<odoo>
	<data noupdate='0'>

	<template id="cicd.mail_testrun_result">
		<h1>TESTRUN RESULT</h1>
		<table>
			<tr>
				<th>Test</th>
				<td><t t-esc="obj.name"/></td>
			</tr>
			<tr>
				<th>Success-Rate</th>
				<td><t t-esc="obj.success_rate"/>%</td>
			</tr>
			<tr>
				<th>Duration</th>
				<td><t t-esc="obj.duration"/> seconds</td>
			</tr>
		</table>
		<h2>Failed Tests</h2>
		<table>
			<tr>
				<th>Test</th>
				<th>Tries</th>
				<th>Type</th>
				<th>Forced Success</th>
				<th>Duration [s]</th>
			</tr>
			<t t-foreach="obj.line_ids.filtered(lambda x: x.state == 'failed')" t-as="line" border='1'>
				<tr>
					<td><t t-esc="line.name"/></td>
					<td><t t-esc="line.try_count"/></td>
					<td><t t-esc="line.ttype"/></td>
					<td><t t-esc="line.force_success"/></td>
					<td><t t-esc="line.duration"/></td>
				</tr>
			</t>
		</table>
	</template>
	<template id="cicd.mail_pre_release_info">
		Pre-Release Information
	</template>
	<template id="cicd.mail_release_done">
		<h1>Deployment <span t-tesc="release.name"/></h1>
		<t t-foreach="patchnotes" t-as="epic">
			<h2><t t-esc="epic['epic'] and epic['epic'].name or ''"/></h2>
			<t t-foreach="epic['types'] or []" t-as="ttype">
				<h3><t t-esc="ttype['type'] and ttype['type'].name or ''"/></h3>
				<ul>
					<strong>
						<a t-att-href="line['branch'].ticket_system_url">
						<t t-esc="line['branch'].name"/>
						</a>
					</strong>
					<p>
						<t t-esc="line['commit'] and line['commit'].date"/>
					</p>
					<p>
						<t t-esc="line['branch'].enduser_summary or ''"/>
					</p>
				</ul>
			</t>
		</t>
	</template>

	</data>
</odoo>
